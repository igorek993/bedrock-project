{
  "version": 4,
  "terraform_version": "1.9.8",
  "serial": 245,
  "lineage": "d32a0801-a22c-ca0a-844f-97f3975af272",
  "outputs": {},
  "resources": [
    {
      "mode": "data",
      "type": "aws_caller_identity",
      "name": "this",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "account_id": "665628331607",
            "arn": "arn:aws:sts::665628331607:assumed-role/AWSReservedSSO_AdministratorAccess_c2a4d704e8bb8d2a/igor.zhukov@itoc.com.au",
            "id": "665628331607",
            "user_id": "AROAZV6UKJZLTH7LAAJNM:igor.zhukov@itoc.com.au"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "data",
      "type": "aws_partition",
      "name": "this",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "dns_suffix": "amazonaws.com",
            "id": "aws",
            "partition": "aws",
            "reverse_dns_prefix": "com.amazonaws"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "data",
      "type": "aws_region",
      "name": "this",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "description": "Asia Pacific (Sydney)",
            "endpoint": "ec2.ap-southeast-2.amazonaws.com",
            "id": "ap-southeast-2",
            "name": "ap-southeast-2"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "bedrock",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::665628331607:role/AmazonBedrockExecutionRoleForKnowledgeBase_igor_test",
            "assume_role_policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Condition\":{\"ArnLike\":{\"aws:SourceArn\":\"arn:aws:bedrock:ap-southeast-2:665628331607:knowledge-base/*\"},\"StringEquals\":{\"aws:SourceAccount\":\"665628331607\"}},\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"bedrock.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}",
            "create_date": "2024-11-23T23:21:15Z",
            "description": "",
            "force_detach_policies": false,
            "id": "AmazonBedrockExecutionRoleForKnowledgeBase_igor_test",
            "inline_policy": [],
            "managed_policy_arns": [],
            "max_session_duration": 3600,
            "name": "AmazonBedrockExecutionRoleForKnowledgeBase_igor_test",
            "name_prefix": "",
            "path": "/",
            "permissions_boundary": "",
            "tags": null,
            "tags_all": {},
            "unique_id": "AROAZV6UKJZL2KLYEAN7C"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "data.aws_caller_identity.this",
            "data.aws_partition.this",
            "data.aws_region.this"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role_policy",
      "name": "bedrock_1",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "AmazonBedrockExecutionRoleForKnowledgeBase_igor_test:AmazonBedrockFoundationModelPolicyForKnowledgeBase_igor_test",
            "name": "AmazonBedrockFoundationModelPolicyForKnowledgeBase_igor_test",
            "name_prefix": "",
            "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":\"bedrock:InvokeModel\",\"Effect\":\"Allow\",\"Resource\":\"arn:aws:bedrock:ap-southeast-2::foundation-model/amazon.titan-embed-text-v2:0\"}]}",
            "role": "AmazonBedrockExecutionRoleForKnowledgeBase_igor_test"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_iam_role.bedrock",
            "data.aws_caller_identity.this",
            "data.aws_partition.this",
            "data.aws_region.this"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role_policy",
      "name": "bedrock_2",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "AmazonBedrockExecutionRoleForKnowledgeBase_igor_test:AmazonBedrockS3PolicyForKnowledgeBase_igor_test",
            "name": "AmazonBedrockS3PolicyForKnowledgeBase_igor_test",
            "name_prefix": "",
            "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":\"s3:ListBucket\",\"Condition\":{\"StringEquals\":{\"aws:PrincipalAccount\":\"665628331607\"}},\"Effect\":\"Allow\",\"Resource\":\"arn:aws:s3:::igor-test-bedrock\",\"Sid\":\"S3ListBucketStatement\"},{\"Action\":\"s3:GetObject\",\"Condition\":{\"StringEquals\":{\"aws:PrincipalAccount\":\"665628331607\"}},\"Effect\":\"Allow\",\"Resource\":\"arn:aws:s3:::igor-test-bedrock/*\",\"Sid\":\"S3GetObjectStatement\"}]}",
            "role": "AmazonBedrockExecutionRoleForKnowledgeBase_igor_test"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_iam_role.bedrock",
            "data.aws_caller_identity.this",
            "data.aws_partition.this",
            "data.aws_region.this"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role_policy",
      "name": "bedrock_3",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "AmazonBedrockExecutionRoleForKnowledgeBase_igor_test:AmazonBedrockOSSPolicyForKnowledgeBase_igor_test",
            "name": "AmazonBedrockOSSPolicyForKnowledgeBase_igor_test",
            "name_prefix": "",
            "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":\"aoss:APIAccessAll\",\"Effect\":\"Allow\",\"Resource\":\"arn:aws:aoss:ap-southeast-2:665628331607:collection/9clpei9jzz5yo8g8xwqk\"}]}",
            "role": "AmazonBedrockExecutionRoleForKnowledgeBase_igor_test"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_iam_role.bedrock",
            "aws_opensearchserverless_access_policy.this",
            "aws_opensearchserverless_collection.this",
            "aws_opensearchserverless_security_policy.this",
            "aws_opensearchserverless_security_policy.this_sec",
            "data.aws_caller_identity.this",
            "data.aws_partition.this",
            "data.aws_region.this"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_opensearchserverless_access_policy",
      "name": "this",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "description": null,
            "id": "wiyf8pm1zgsf2rnd96of",
            "name": "wiyf8pm1zgsf2rnd96of",
            "policy": "[{\"Principal\":[\"arn:aws:iam::665628331607:role/service-role/AmazonBedrockExecutionRoleForKnowledgeBase_8esg8\",\"arn:aws:sts::665628331607:assumed-role/AWSReservedSSO_AdministratorAccess_c2a4d704e8bb8d2a/igor.zhukov@itoc.com.au\"],\"Rules\":[{\"Permission\":[\"aoss:CreateIndex\",\"aoss:DeleteIndex\",\"aoss:DescribeIndex\",\"aoss:ReadDocument\",\"aoss:UpdateIndex\",\"aoss:WriteDocument\"],\"Resource\":[\"index/wiyf8pm1zgsf2rnd96of/*\"],\"ResourceType\":\"index\"},{\"Permission\":[\"aoss:CreateCollectionItems\",\"aoss:DescribeCollectionItems\",\"aoss:UpdateCollectionItems\"],\"Resource\":[\"collection/wiyf8pm1zgsf2rnd96of\"],\"ResourceType\":\"collection\"}]}]",
            "policy_version": "MTczMjQwNDA3NTQ3NF8x",
            "type": "data"
          },
          "sensitive_attributes": [],
          "dependencies": [
            "data.aws_caller_identity.this"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_opensearchserverless_collection",
      "name": "this",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:aoss:ap-southeast-2:665628331607:collection/9clpei9jzz5yo8g8xwqk",
            "collection_endpoint": "https://9clpei9jzz5yo8g8xwqk.ap-southeast-2.aoss.amazonaws.com",
            "dashboard_endpoint": "https://9clpei9jzz5yo8g8xwqk.ap-southeast-2.aoss.amazonaws.com/_dashboards",
            "description": null,
            "id": "9clpei9jzz5yo8g8xwqk",
            "kms_key_arn": "auto",
            "name": "wiyf8pm1zgsf2rnd96of",
            "standby_replicas": "ENABLED",
            "tags": null,
            "tags_all": {},
            "timeouts": null,
            "type": "VECTORSEARCH"
          },
          "sensitive_attributes": [],
          "dependencies": [
            "aws_opensearchserverless_access_policy.this",
            "aws_opensearchserverless_security_policy.this",
            "aws_opensearchserverless_security_policy.this_sec",
            "data.aws_caller_identity.this"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_opensearchserverless_security_policy",
      "name": "this",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "description": null,
            "id": "wiyf8pm1zgsf2rnd96of",
            "name": "wiyf8pm1zgsf2rnd96of",
            "policy": "{\"AWSOwnedKey\":true,\"Rules\":[{\"Resource\":[\"collection/wiyf8pm1zgsf2rnd96of\"],\"ResourceType\":\"collection\"}]}",
            "policy_version": "MTczMjQwNDA3NTQ5NF8x",
            "type": "encryption"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_opensearchserverless_security_policy",
      "name": "this_sec",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "description": null,
            "id": "wiyf8pm1zgsf2rnd96of",
            "name": "wiyf8pm1zgsf2rnd96of",
            "policy": "[{\"AllowFromPublic\":true,\"Rules\":[{\"Resource\":[\"collection/wiyf8pm1zgsf2rnd96of\"],\"ResourceType\":\"collection\"},{\"Resource\":[\"collection/wiyf8pm1zgsf2rnd96of\"],\"ResourceType\":\"dashboard\"}]}]",
            "policy_version": "MTczMjQwNDA3NTQ5MF8x",
            "type": "network"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "managed",
      "type": "opensearch_index",
      "name": "this",
      "provider": "provider[\"registry.terraform.io/opensearch-project/opensearch\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "aliases": null,
            "analysis_analyzer": null,
            "analysis_char_filter": null,
            "analysis_filter": null,
            "analysis_normalizer": null,
            "analysis_tokenizer": null,
            "analyze_max_token_count": null,
            "auto_expand_replicas": null,
            "blocks_metadata": null,
            "blocks_read": null,
            "blocks_read_only": null,
            "blocks_read_only_allow_delete": null,
            "blocks_write": null,
            "codec": null,
            "default_pipeline": null,
            "force_destroy": true,
            "gc_deletes": null,
            "highlight_max_analyzed_offset": null,
            "id": "bedrock-knowledge-base-default-index",
            "include_type_name": null,
            "index_knn": true,
            "index_knn_algo_param_ef_search": null,
            "index_similarity_default": null,
            "indexing_slowlog_level": null,
            "indexing_slowlog_source": null,
            "indexing_slowlog_threshold_index_debug": null,
            "indexing_slowlog_threshold_index_info": null,
            "indexing_slowlog_threshold_index_trace": null,
            "indexing_slowlog_threshold_index_warn": null,
            "load_fixed_bitset_filters_eagerly": null,
            "mappings": "{\n  \"properties\": {\n    \"bedrock-knowledge-base-default-vector\": {\n      \"type\": \"knn_vector\",\n      \"dimension\": 1024,\n      \"method\": {\n        \"name\": \"hnsw\",\n        \"engine\": \"faiss\",\n        \"parameters\": {\n          \"m\": 16,\n          \"ef_construction\": 512\n        },\n        \"space_type\": \"l2\"\n      }\n    },\n    \"AMAZON_BEDROCK_METADATA\": {\n      \"type\": \"text\",\n      \"index\": \"false\"\n    },\n    \"AMAZON_BEDROCK_TEXT_CHUNK\": {\n      \"type\": \"text\",\n      \"index\": \"true\"\n    }\n  }\n}\n",
            "max_docvalue_fields_search": null,
            "max_inner_result_window": null,
            "max_ngram_diff": null,
            "max_refresh_listeners": null,
            "max_regex_length": null,
            "max_rescore_window": null,
            "max_result_window": null,
            "max_script_fields": null,
            "max_shingle_diff": null,
            "max_terms_count": null,
            "name": "bedrock-knowledge-base-default-index",
            "number_of_replicas": "0",
            "number_of_routing_shards": null,
            "number_of_shards": "2",
            "refresh_interval": null,
            "rollover_alias": null,
            "routing_allocation_enable": null,
            "routing_partition_size": null,
            "routing_rebalance_enable": null,
            "search_idle_after": null,
            "search_slowlog_level": null,
            "search_slowlog_threshold_fetch_debug": null,
            "search_slowlog_threshold_fetch_info": null,
            "search_slowlog_threshold_fetch_trace": null,
            "search_slowlog_threshold_fetch_warn": null,
            "search_slowlog_threshold_query_debug": null,
            "search_slowlog_threshold_query_info": null,
            "search_slowlog_threshold_query_trace": null,
            "search_slowlog_threshold_query_warn": null,
            "shard_check_on_startup": null,
            "sort_field": null,
            "sort_order": null
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_opensearchserverless_access_policy.this",
            "aws_opensearchserverless_collection.this",
            "aws_opensearchserverless_security_policy.this",
            "aws_opensearchserverless_security_policy.this_sec",
            "data.aws_caller_identity.this"
          ]
        }
      ]
    }
  ],
  "check_results": null
}
